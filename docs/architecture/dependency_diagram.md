# Architectural Dependency Diagram

The compiler’s current intra-crate module dependencies are captured in the Graphviz DOT artefact stored at `docs/architecture/dependency_diagram.dot`. The diagram is generated by analysing `use crate::…` statements across the `src/` tree and recording edges between modules.

## Regenerating the Diagram

```bash
python3 scripts/gen_dependency_diagram.py
dot -Tsvg docs/architecture/dependency_diagram.dot -o docs/architecture/dependency_diagram.svg
```

> The second command is optional and requires Graphviz. It produces an SVG rendering suitable for documentation or architectural reviews.

## Key Observations (2025-10-31)

- **High Fan-Out Modules**: `crate::driver` and `crate::codegen` currently depend on a broad set of modules, indicating they should be prioritised in the ongoing decomposition work.
- **Backend Coupling**: Both LLVM and WASM emitters depend on shared MIR structures but have minimal cross-linking with `src/support/`, reinforcing the need for consolidated backend traits.
- **Parser Fragmentation**: Frontend parser modules import one another directly, highlighting opportunities to route interactions through dedicated interfaces once the planned splits land.

## Metrics

- Modules discovered: 221
- Edges discovered: 207

Regenerate the diagram after major refactors to keep these metrics current and record the updated counts in this document.
